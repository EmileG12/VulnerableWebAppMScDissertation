{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h2 class="text-center mb-4">ğŸ”§ Update Account Settings</h2>
            
            <!-- Change Username Form -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">ğŸ‘¤ Change Username</h5>
                </div>
                <div class="card-body">
                    <form action="/changeusername" method="get">
                        <div class="form-group">
                            <label for="newusername" class="form-label">New Username:</label>
                            <input type="text" class="form-control" id="newusername" name="newusername" 
                                   placeholder="Enter your new username" required>
                        </div>
                        <input type="hidden" id="userid" name="userid" value="{{userid}}">
                        <button type="submit" class="btn btn-primary">
                            ğŸ’¾ Update Username
                        </button>
                    </form>
                </div>
            </div>

            <!-- Change Display Name Form -->
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">ğŸ†” Change Display Name</h5>
                </div>
                <div class="card-body">
                    <form action="/changename" method="get">
                        <div class="form-group">
                            <label for="newname" class="form-label">New Display Name:</label>
                            <input type="text" class="form-control" id="newname" name="newname" 
                                   placeholder="Enter your new display name" required>
                        </div>
                        <input type="hidden" id="userid2" name="userid" value="{{userid}}">
                        <button type="submit" class="btn btn-success">
                            ğŸ’¾ Update Display Name
                        </button>
                    </form>
                    <small class="text-muted">This appears on your profile page - <strong>âš ï¸ XSS vulnerable!</strong></small>
                </div>
            </div>

            <!-- Change Password Form -->
            <div class="card mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">ğŸ”‘ Change Password</h5>
                </div>
                <div class="card-body">
                    <form action="/changepassword" method="post">
                        <div class="form-group">
                            <label for="passwordbox" class="form-label">New Password:</label>
                            <input type="password" class="form-control" id="passwordbox" name="passwordbox" 
                                   placeholder="Enter your new password" required>
                        </div>
                        <input type="hidden" id="userhash" name="userhash" value="{{userhash}}">
                        <button type="submit" class="btn btn-warning text-dark">
                            ğŸ’¾ Update Password
                        </button>
                    </form>
                    <small class="text-muted">Keep your password secure</small>
                </div>
            </div>

            <!-- Delete Account Form -->
            <div class="card mb-4 border-danger">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">ğŸ—‘ï¸ Delete Account</h5>
                </div>
                <div class="card-body">
                    <p class="text-danger">
                        <strong>âš ï¸ WARNING:</strong> This action is permanent and cannot be undone. 
                        All your account data will be deleted immediately.
                    </p>
                    <form action="/deleteuser" method="post">
                        <button type="submit" class="btn btn-danger" 
                                onclick="return confirm('Are you absolutely sure you want to delete your account? This action cannot be undone.')">
                            ğŸ—‘ï¸ Delete My Account Permanently
                        </button>
                    </form>
                    <small class="text-muted">This will delete your account and all associated data - </small>
                </div>
            </div>

            <!-- Navigation -->
            <div class="text-center">
                <a href="{{ url_for('main.profile') }}" class="btn btn-outline-secondary me-2">
                    ğŸ‘¤ View Profile
                </a>
                <a href="{{ url_for('main.index') }}" class="btn btn-outline-primary">
                    ğŸ  Back to Home
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Add some custom styling -->
<style>
.card-header h5 {
    margin: 0;
}
.form-group {
    margin-bottom: 1rem;
}
.btn {
    margin-top: 0.5rem;
}
</style>
{% endblock %}